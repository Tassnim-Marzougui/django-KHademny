{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Liste des candidats</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    * {margin:0; padding:0; box-sizing:border-box; font-family:'Poppins',sans-serif;}

    body {
      min-height:100vh;
      background: linear-gradient(135deg,#a1c4fd,#c2e9fb,#fbc2eb,#fad0c4);
      background-size:400% 400%;
      animation: bgMove 15s ease infinite;
      display:flex;
      flex-direction:column;
      align-items:center;
      padding-top:100px;
    }

    @keyframes bgMove {
      0%{background-position:0% 50%;}
      50%{background-position:100% 50%;}
      100%{background-position:0% 50%;}
    }

    .container {
      width:100%;
      max-width:1200px;
      padding:20px;
    }

    h2 {
      text-align:center;
      margin-bottom:30px;
      font-size:2.2rem;
      font-weight:600;
      color:#333;
    }

    .grid {
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
      gap:25px;
    }

    .candidat-card {
      background:#fff;
      border-radius:20px;
      padding:25px;
      box-shadow:0 10px 25px rgba(0,0,0,0.1);
      transition:transform 0.3s, box-shadow 0.3s;
      display:flex;
      flex-direction:column;
      align-items:center;
      text-align:center;
    }

    .candidat-card:hover {
      transform:translateY(-8px);
      box-shadow:0 15px 35px rgba(0,0,0,0.15);
    }

    .avatar {
      width:90px;
      height:90px;
      border-radius:50%;
      background:linear-gradient(135deg,#84fab0,#8fd3f4);
      display:flex;
      justify-content:center;
      align-items:center;
      font-size:1.8rem;
      font-weight:600;
      color:#333;
      margin-bottom:15px;
      box-shadow:0 0 15px rgba(132,250,176,0.6);
    }

    .candidat-info {
      width:100%;
      display:grid;
      gap:8px;
      color:#555;
      margin-bottom:15px;
    }

    .candidat-info strong {
      font-size:1.2rem;
      color:#222;
    }

    .candidat-info span {
      font-size:0.95rem;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }

    .candidat-info i {
      color:#6a00f4;
    }

    .badge {
      background:linear-gradient(90deg,#fbc2eb,#a6c1ee);
      padding:6px 12px;
      border-radius:12px;
      font-size:0.85rem;
      color:#333;
      font-weight:500;
      display:inline-block;
      margin-top:10px;
    }

    .actions {
      margin-top:auto;
    }

    .btn {
      display:inline-block;
      padding:8px 14px;
      border-radius:8px;
      font-size:0.9rem;
      font-weight:500;
      text-decoration:none;
      transition:background 0.3s;
    }

    .btn-danger {
      background:#dc3545;
      color:#fff;
    }

    .btn-danger:hover {
      background:#bb2d3b;
    }

    .empty {
      text-align:center;
      background:#fff;
      padding:20px;
      border-radius:15px;
      font-size:1.1rem;
      color:#555;
      box-shadow:0 8px 20px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

<div class="container">
  <h2>Liste des candidats</h2>

  <div class="grid">
    {% for c in candidats %}
    <div class="candidat-card">
      <div class="avatar">
        {{ c.nom|slice:":1" }}{{ c.prenom|slice:":1" }}
      </div>
      <div class="candidat-info">
        <strong>{{ c.nom }} {{ c.prenom }}</strong>
        <span><i class="fa fa-envelope"></i> {{ c.email }}</span>
        <span><i class="fa fa-phone"></i> {{ c.telephone }}</span>
        <span class="badge"><i class="fa fa-file"></i> {{ c.cv }}</span>
      </div>
      <div class="actions">
        <a href="#" class="btn btn-danger" onclick="supprimerCandidat('{% url 'supprimer_candidat' c.id %}')">
          <i class="fa fa-trash"></i> Supprimer
        </a>
      </div>
    </div>
    {% empty %}
    <div class="empty">Aucun candidat trouvé.</div>
    {% endfor %}
  </div>
</div>

<!-- SweetAlert -->
<script>
function supprimerCandidat(url) {
  Swal.fire({
    title: 'Êtes-vous sûr ?',
    text: "Ce candidat sera définitivement supprimé.",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#d33',
    cancelButtonColor: '#3085d6',
    confirmButtonText: 'Oui, supprimer',
    cancelButtonText: 'Annuler'
  }).then((result) => {
    if (result.isConfirmed) {
      window.location.href = url;
    }
  });
}
</script>

{% if messages %}
<script>
  {% for message in messages %}
  Swal.fire({
    icon: 'success',
    title: 'Succès',
    text: '{{ message }}',
    showConfirmButton: false,
    timer: 2000
  });
  {% endfor %}
</script>
{% endif %}

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
